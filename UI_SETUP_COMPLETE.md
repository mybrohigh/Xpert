# üéâ UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–æ–º –≥–æ—Ç–æ–≤!

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **TrafficManager.tsx** - –ø–æ–ª–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–æ–º
- **TrafficPage.tsx** - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è Traffic Manager
- **–û–±–Ω–æ–≤–ª–µ–Ω Router.tsx** - –¥–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/traffic/`
- **–û–±–Ω–æ–≤–ª–µ–Ω Header.tsx** - –¥–æ–±–∞–≤–ª–µ–Ω –ø—É–Ω–∫—Ç –º–µ–Ω—é "Traffic Manager"

### üìä –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ UI
- ‚úÖ **–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Å–µ—Ä–≤–µ—Ä—ã, —Ç—Ä–∞—Ñ–∏–∫
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î** - –∑–∞–ø–∏—Å–∏, —Ä–∞–∑–º–µ—Ä, —Ä–µ—Ç–µ–Ω—à–Ω
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞
- ‚úÖ **–ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - —Å–±—Ä–æ—Å, –æ—á–∏—Å—Ç–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### üîó –ù–∞–≤–∏–≥–∞—Ü–∏—è
- **–ß–µ—Ä–µ–∑ –º–µ–Ω—é:** ‚ò∞ ‚Üí Traffic Manager
- **–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞:** `#/traffic/`

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Xpert
```bash
# –ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å
sudo systemctl restart xpert

# –ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ –≤—Ä—É—á–Ω—É—é
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ctrl+C –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
python3 main.py
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ UI
```
http://your-domain.com
```

### 3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ Traffic Manager
```
1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –º–µ–Ω—é ‚ò∞ (—Ç—Ä–∏ –ø–æ–ª–æ—Å–∫–∏ –≤–≤–µ—Ä—Ö—É)
2. –í—ã–±–µ—Ä–∏—Ç–µ "Traffic Manager"
–ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é: http://your-domain.com/#/traffic/
```

## üìä –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ UI

### üìà –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```
Total Users: 25
Total Servers: 150  
Traffic Used: 125.78 GB
Total Connections: 1250
```

### üóÑÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î
```
Total Records: 5,000
Unique Users: 150
Unique Servers: 200
Database Size: 12.45 MB
Retention: Infinite
```

### üë§ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
User Token: admin1
Days: 30

Server          Protocol   Traffic    Connections   Last Used
vpn.com:443     VLESS     2.456 GB      15        2024-02-10 19:20
server2.com:8443  VMESS     1.234 GB      8         2024-02-10 18:45
```

### üéØ –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **Refresh** - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- **Reset All** - —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫
- **Cleanup Old Data** - —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Marzban

### –ö–Ω–æ–ø–∫–∏ –≤ Marzban UI —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç —Å –≤–Ω–µ—à–Ω–∏–º —Ç—Ä–∞—Ñ–∏–∫–æ–º:
- ‚úÖ **"–°–±—Ä–æ—Å–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫"** - –æ—á–∏—â–∞–µ—Ç Marzban + –≤–Ω–µ—à–Ω–∏–π —Ç—Ä–∞—Ñ–∏–∫
- ‚úÖ **"–õ–∏–º–∏—Ç —Ç—Ä–∞—Ñ–∏–∫–∞"** - —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –≤ –ª–∏–º–∏—Ç–∞—Ö

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã:
```
GET  /api/admin/usage/{username}              - –û–±—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
GET  /api/admin/usage/{username}/detailed   - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
POST /api/admin/usage/reset/{username}       - –°–±—Ä–æ—Å –≤—Å–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ Traffic Manager
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã
4. –í–≤–µ–¥–∏—Ç–µ user_token –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
1. –ù–∞–∂–º–∏—Ç–µ "Refresh" - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
2. –ù–∞–∂–º–∏—Ç–µ "Reset All" - –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Å–±—Ä–æ—Å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω—É–ª–∏–ª–∞—Å—å

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ç—Ä–∞—Ñ–∏–∫–æ–º
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É —Å `user_token=test_user`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ webhook –¥–∞–Ω–Ω—ã–µ:
```bash
curl -X POST "http://your-domain.com/api/xpert/traffic-webhook" \
  -H "Content-Type: application/json" \
  -d '{
    "user_token": "test_user",
    "server": "vpn.example.com",
    "port": 443,
    "protocol": "vless",
    "bytes_uploaded": 1048576,
    "bytes_downloaded": 2097152
  }'
```
3. –û–±–Ω–æ–≤–∏—Ç–µ UI - –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## üõ†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```env
# –í–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
XPERT_TRAFFIC_TRACKING_ENABLED=True

# –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
XPERT_TRAFFIC_DB_PATH=data/traffic_stats.db

# –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (0 = –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ)
XPERT_TRAFFIC_RETENTION_DAYS=0

# –î–æ–º–µ–Ω –¥–ª—è webhook
XPERT_DOMAIN=your-domain.com
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```
–§–∞–π–ª: data/traffic_stats.db
–¢–∞–±–ª–∏—Ü–∞: traffic_usage
–ò–Ω–¥–µ–∫—Å—ã: user_token, server_port, timestamp
–†–∞–∑–º–µ—Ä: ~0.1MB –Ω–∞ 1000 –∑–∞–ø–∏—Å–µ–π
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–æ–º —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ VPN —Å–µ—Ä–≤–µ—Ä–∞!**

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- üìä **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –ø–æ –∫–Ω–æ–ø–∫–µ
- üóëÔ∏è **–°–±—Ä–æ—Å —Ç—Ä–∞—Ñ–∏–∫–∞** —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- üßπ **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- üë§ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º** –∏ –¥–∞—Ç–∞–º
- ‚öôÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã** —á–µ—Ä–µ–∑ UI

### üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- üéõÔ∏è **Marzban UI** - –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –≤–Ω–µ—à–Ω–∏–º —Ç—Ä–∞—Ñ–∏–∫–æ–º
- üì° **Webhook —Å–∏—Å—Ç–µ–º–∞** - –ø—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- üì± **–ü–æ–¥–ø–∏—Å–Ω—ã–µ URL** - —Å tracking –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- üóÑÔ∏è **SQLite –±–∞–∑–∞** - –±—ã—Å—Ç—Ä–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è

### üé® UI/UX:
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üéØ **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ –º–µ–Ω—é
- üìä **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ –∫–∞—Ä—Ç–∞—Ö
- ‚ö†Ô∏è **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —É—Å–ø–µ—Ö–µ
- üîÑ **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏** –¥–ª—è –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
- üìà –í–∏–¥–µ—Ç—å —Å–∫–æ–ª—å–∫–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞—à–∏ –∫–ª–∏–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ —á—É–∂–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
- üéõÔ∏è –£–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞—Ñ–∏–∫–æ–º —á–µ—Ä–µ–∑ –ø—Ä–∏–≤—ã—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –≤ Marzban
- üìä –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ —Å–µ—Ä–≤–µ—Ä–∞–º
- üóëÔ∏è –°–±—Ä–∞—Å—ã–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã
- üîß –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π UI

**–ó–∞–ø—É—Å–∫–∞–π—Ç–µ Xpert –∏ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º!** üöÄ
